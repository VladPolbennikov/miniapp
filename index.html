<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>AI –ü–æ–º–æ—â–Ω–∏–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="container">
        <div class="avatar">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM4QkMzNEEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0wIDNjMS42NiAwIDMgMS4zNCAzIDNzLTEuMzQgMy0zIDMtMy0xLjM0LTMtMyAxLjM0LTMgMy0zem0wIDEyLjJjLTIuNSAwLTQuNzEtMS4yOC02LTMuMjIuMDMtMS45OSA0LTMuMDggNi0zLjA4czUuOTcgMS4wOSA2IDMuMDhjLTEuMjkgMS45NC0zLjUgMy4yMi02IDMuMjJ6IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4KPC9zdmc+" alt="Bot Avatar" />
        </div>

        <header>
            <h1>AI –ü–æ–º–æ—â–Ω–∏–∫</h1>
            <p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</p>
        </header>

        <main>
            <button id="stats-btn" class="btn primary">
                <div class="btn-content">
                    <div class="btn-icon">üìä</div>
                    <div class="btn-text">
                        <span class="btn-title">–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                        <span class="btn-subtitle">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</span>
                    </div>
                </div>
            </button>

            <button id="speed-btn" class="btn">
                <div class="btn-content">
                    <div class="btn-icon">‚ö°</div>
                    <div class="btn-text">
                        <span class="btn-title">–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏</span>
                        <span class="btn-subtitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º–ø–∞</span>
                    </div>
                </div>
            </button>

            <button id="voice-btn" class="btn">
                <div class="btn-content">
                    <div class="btn-icon">üéôÔ∏è</div>
                    <div class="btn-text">
                        <span class="btn-title">–í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞</span>
                        <span class="btn-subtitle">–ò–∑–º–µ–Ω–∏—Ç—å –æ–∑–≤—É—á–∫—É</span>
                    </div>
                </div>
            </button>

            <button id="premium-btn" class="btn premium">
                <div class="btn-content">
                    <div class="btn-icon">‚≠ê</div>
                    <div class="btn-text">
                        <span class="btn-title">–ü—Ä–µ–º–∏—É–º</span>
                        <span class="btn-subtitle">–ë–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π</span>
                    </div>
                    <div class="premium-badge">PRO</div>
                </div>
            </button>

            <button id="help-btn" class="btn">
                <div class="btn-content">
                    <div class="btn-icon">üí¨</div>
                    <div class="btn-text">
                        <span class="btn-title">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                        <span class="btn-subtitle">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</span>
                    </div>
                </div>
            </button>
        </main>
    </div>

    <script>
      const tg = window.Telegram.WebApp;
      tg.ready();

      // HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ)
      const ENDPOINT = "http://194.87.208.6:8080/webapp";

      // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥ (–æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π sendPremium)
      async function sendCommand(command) {
        try {
          const queryId = tg?.initDataUnsafe?.query_id;
          if (!queryId) {
            console.log("query_id –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (Mini App –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –∏–∑ –º–µ–Ω—é/–≤–ª–æ–∂–µ–Ω–∏–π).");
            return;
          }

          const resp = await fetch(ENDPOINT, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ query_id: queryId, command: command }),
          });

          const data = await resp.json();
          if (!data.ok) {
            console.error("Server error:", data);
            return;
          }

          tg.close();
        } catch (e) {
          console.error(e);
        }
      }

      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
      document.getElementById("stats-btn").addEventListener("click", () => sendCommand("stats"));
      document.getElementById("speed-btn").addEventListener("click", () => sendCommand("speed"));
      document.getElementById("voice-btn").addEventListener("click", () => sendCommand("voice"));
      document.getElementById("premium-btn").addEventListener("click", () => sendCommand("premium"));
      document.getElementById("help-btn").addEventListener("click", () => sendCommand("help"));
    </script>
  </body>
</html>
